<%= content_for :head do %>

<% end %>
<%= content_for :footer do %>
  <%= javascript_include_tag "components/event_booking_cocoon" %>
<% end %>

<section class="content-area">
  <div class="row">
    <div class="medium-8 small-12 columns">
      <div class="main-content-wrap">
        <h1><%= @presented_event.booking_title %></h1>

        <p>Please fill in your details and then add each attendee. If you wish to attend the event, you must add yourself as an attendee too.</p>

        <div class="content">
          <%= form_for [@event, @event_booking] do |f| %>
            <% if @event_booking.errors.any? %>
              <div id="error_explanation">
                <h2><%= pluralize(@event_booking.errors.count, 'error') %> prevented this booking from being made</h2>
                <ul>
                  <% @event_booking.errors.full_messages.each do |msg| %>
                    <li>
                      <%= msg %>
                    </li>
                  <% end %>
                </ul>
              </div>
            <% end %>

            <div class="row">
              <div class="small-12 medium-6 columns">
                <div class="field">
                  <%= f.label :name %><br/>
                  <%= f.text_field :name %>
                </div>
              </div>

              <div class="small-12 medium-6 columns">
                <div class="field">
                  <%= f.label :company_name %><br/>
                  <%= f.text_field :company_name %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="small-12 medium-6 columns">
                <div class="field">
                  <%= f.label :industry %><br/>
                  <%= f.text_field :industry %>
                </div>
              </div>

              <div class="small-12 medium-6 columns">
                <div class="field">
                  <%= f.label :nature_of_business %><br/>
                  <%= f.text_field :nature_of_business %>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="small-12 medium-6 columns">
                <div class="row">
                  <div class="small-12 medium-6 columns">
                    <div class="field">
                      <%= f.label :email %><br/>
                      <%= f.email_field :email %>
                    </div>
                  </div>

                  <div class="small-12 medium-6 columns">
                    <div class="field">
                      <%= f.label :phone_number %><br/>
                      <%= f.telephone_field :phone_number %>
                    </div>
                  </div>
                </div>
              </div>

              <div class="small-12 medium-6 columns">
                <div class="field">
                  <%= f.label :address %><br/>
                  <%= f.text_area :address %>
                </div>
              </div>
            </div>

            <%= field_set_tag "Attendees", id: "event-attendees" do %>
              <%= f.fields_for :attendees do |attendee| %>
                <%= render "attendees/attendee_fields", f: attendee %>
              <% end %>
              <%= link_to_add_association "Add Attendee", f, :attendees, partial: "attendees/attendee_fields" %>
            <% end %>

            <div class="actions">
              <%= f.submit "Create Booking", class: 'button' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="medium-4 small-12 columns">
      <%= render 'shared/sidebar' %>
    </div>
  </div>
</section>
